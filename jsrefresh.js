const jquery_url='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js';const css_url="jsrefresh.css";(function(){function loadJQuery(callback){var script=document.createElement('script');script.src=jquery_url;script.type='text/javascript';script.onload=function(){if(typeof jQuery==='function'){callback();}else{console.error("Failed to load jQuery.");}};script.onerror=function(){console.error("Error loading jQuery.");};document.head.appendChild(script);}function loadCSS(){var link=document.createElement('link');link.href=css_url;link.type='text/css';link.rel='stylesheet';document.head.appendChild(link);}function initialize(){$(document).ready(function(){function loadContent(url,isDefault){$.get(url,function(data){$("jsrvp").html(data);var pageTitle=data.match(/<title>(.*?)<\/title>/i);if(pageTitle&&pageTitle[1]){document.title=pageTitle[1]}else if(isDefault){document.title=pageTitle[1]}}).fail(function(){$("jsrvp").html("<p style='color: red'>jsrefresh | 404 - Not found.</p>");document.title=""});}$(document).on("click","jsrlink",function(){var file=$(this).attr("file");if(file){loadContent(file,false);if(history.pushState){history.pushState(null,null,$(this).attr("url")||$(this).attr("file"))}}else{console.error("JsRefresh | File attribute is required!");$("jsrvp").html("<p style='color: red'>jsrefresh | Something went wrong. Please check console.</p>");document.title=""}});var defaults=$("jsrlink[default]");if(defaults.length===1){var file=defaults.attr("file");loadContent(file,true);if(history.replaceState){history.replaceState(null,null,defaults.attr("url")||"/")}}else if(defaults.length>1){$("jsrvp").html("<p style='color: red'>jsrefresh | Multiple default pages are not allowed.</p>");document.title=""}});}if(window.jQuery){loadCSS();initialize();}else{loadJQuery(function(){loadCSS();initialize();});}})();